{% extends "main.html" %} 
{% load static %}
{% block header %}

  <link href="{% static 'assets/libs/flot/css/float-chart.css' %}" rel="stylesheet" />
  <!-- <link href="static/assets/libs/flot/css/float-chart.css" rel="stylesheet" /> -->
  <style>
  /* .dash-block i { */
    /* font-style: normal;
    width: 35px;
    font-size: 23px !important;
    color: #fff;
    display: inline-block; */
    /* text-align: center; */
  /* } */
</style>
{% endblock header %} 

{% block content %}





	      <div class="page-breadcrumb">
          <div class="row">
            <div class="col-12 d-flex no-block align-items-center">
              <h4 class="page-title">Dashboard</h4>
              <div class="ms-auto text-end">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">
                      Library
                    </li>
                  </ol>
                </nav>
              </div>
            </div>
          </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Bread crumb and right sidebar toggle -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Container fluid  -->
        <!-- ============================================================== -->
        <div class="container-fluid">
          <!-- ============================================================== -->
          <!-- Sales Cards  -->
          <!-- ============================================================== -->

          <div class="row">
            <div class="col-md-3">
              <div class="card mt-0 card-hover">
                <div class="bg-dark p-10 text-white text-center">
                  <div class="row">
                    <div class="col-md-6">  
                      <i class="fas fa-users fs-1 mb-1 pt-2"></i>
                    </div>
                    <div class="col-md-6 border-left text-center pt-2-old">
                      <h2 class="mb-0 fw-bold-old totalStaff"><div id="totalStaff"></div></h2>
                      <span class="font-light">Total Staff</span>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="col-md-3">
              <div class="card mt-0 card-hover">
                <div class="bg-dark p-10 text-white text-center">
                  <div class="row">
                    <div class="col-md-6">  
                      <i class="mdi mdi-contacts fs-1 mb-1 pt-2"></i>
                    </div>
                    <div class="col-md-6 border-left text-center pt-2-old">
                      <h2 class="mb-0 fw-bold-old"><div id="totalContact"></div></h2>
                      <span class="font-light">Total Contact</span>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="col-md-3">
              <div class="card mt-0 card-hover">
                <div class="bg-dark p-10 text-white text-center">
                  <div class="row">
                    <div class="col-md-6">  
                      <i class="mdi mdi-scale-balance fs-1 mb-1 pt-2"></i>
                    </div>
                    <div class="col-md-6 border-left text-center pt-2-old">
                      <h2 class="mb-0 fw-bold-old"><div id="totalMatter"></div></h2>
                      <span class="font-light">Total Matter</span>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="col-md-3">
              <div class="card mt-0 card-hover">
                <div class="bg-dark p-10 text-white text-center">
                  <div class="row">
                    <div class="col-md-6">  
                      <i class="far fa-calendar-alt fs-1 mb-1 pt-2"></i>
                    </div>
                    <div class="col-md-6 border-left text-center pt-2-old">
                      <h2 class="mb-0 fw-bold-old"><div id="currentTodo"></div></h2>
                      <span class="font-light">Scheduled To-Do</span>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            



          </div>
          <!-- ============================================================== -->
          <!-- Sales chart -->
          <!-- ============================================================== -->
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-body">
                  <div class="d-md-flex align-items-center">
                    <div>
                      <h4 class="card-title">Site Analysis</h4>
                      <h5 class="card-subtitle">Overview of Latest Month</h5>
                    </div>
                  </div>
                  <div class="row">
                    <!-- column -->
                    <div class="col-lg-9">
                      <div class="flot-chart">
                        <div
                          class="flot-chart-content"
                          id="flot-line-chart"
                        ></div>
                      </div>
                    </div>
                    <div class="col-lg-3">
                      <div class="row">
                        <div class="col-6">
                          <div class="bg-dark p-10 text-white text-center">
                            <i class="mdi mdi-account fs-3 mb-1 font-16"></i>
                            <h5 class="mb-0 mt-1">2540</h5>
                            <small class="font-light">Total Users</small>
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="bg-dark p-10 text-white text-center">
                            <i class="mdi mdi-plus fs-3 font-16"></i>
                            <h5 class="mb-0 mt-1">120</h5>
                            <small class="font-light">New Users</small>
                          </div>
                        </div>
                        <div class="col-6 mt-3">
                          <div class="bg-dark p-10 text-white text-center">
                            <i class="mdi mdi-cart fs-3 mb-1 font-16"></i>
                            <h5 class="mb-0 mt-1">656</h5>
                            <small class="font-light">Total Shop</small>
                          </div>
                        </div>
                        <div class="col-6 mt-3">
                          <div class="bg-dark p-10 text-white text-center">
                            <i class="mdi mdi-tag fs-3 mb-1 font-16"></i>
                            <h5 class="mb-0 mt-1">9540</h5>
                            <small class="font-light">Total Orders</small>
                          </div>
                        </div>
                        <div class="col-6 mt-3">
                          <div class="bg-dark p-10 text-white text-center">
                            <i class="mdi mdi-table fs-3 mb-1 font-16"></i>
                            <h5 class="mb-0 mt-1">100</h5>
                            <small class="font-light">Pending Orders</small>
                          </div>
                        </div>
                        <div class="col-6 mt-3">
                          <div class="bg-dark p-10 text-white text-center">
                            <i class="mdi mdi-web fs-3 mb-1 font-16"></i>
                            <h5 class="mb-0 mt-1">8540</h5>
                            <small class="font-light">Online Orders</small>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- column -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Pie Chart</h5>
                  <div class="pie" style="height: 400px; padding: 0px; position: relative;"><canvas class="flot-base" width="705" height="500" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 564.6px; height: 400px;"></canvas><canvas class="flot-overlay" width="705" height="500" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 564.6px; height: 400px;"></canvas><div class="legend"><div style="position: absolute; width: 57.55px; height: 175.387px; top: 5px; right: 5px; background-color: rgb(255, 255, 255); opacity: 0.85;"> </div><table style="position:absolute;top:5px;right:5px;;font-size:smaller;color:#545454"><tbody><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(72,140,19);overflow:hidden"></div></div></td><td class="legendLabel">Series1</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(27,85,192);overflow:hidden"></div></div></td><td class="legendLabel">Series2</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(218,75,15);overflow:hidden"></div></div></td><td class="legendLabel">Series3</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(233,177,4);overflow:hidden"></div></div></td><td class="legendLabel">Series4</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(174,60,12);overflow:hidden"></div></div></td><td class="legendLabel">Series5</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(57,112,15);overflow:hidden"></div></div></td><td class="legendLabel">Series6</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(21,68,153);overflow:hidden"></div></div></td><td class="legendLabel">Series7</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(174,60,12);overflow:hidden"></div></div></td><td class="legendLabel">Series8</td></tr><tr><td class="legendColorBox"><div style="border:1px solid #ccc;padding:1px"><div style="width:4px;height:0;border:5px solid rgb(186,141,3);overflow:hidden"></div></div></td><td class="legendLabel">Series9</td></tr></tbody></table></div><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 46.0125px; left: 324.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel0" style="position: absolute; top: 46.0125px; left: 324.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series1<br>4%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 62.0125px; left: 382.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel1" style="position: absolute; top: 62.0125px; left: 382.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series2<br>7%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 180.012px; left: 483.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel2" style="position: absolute; top: 180.012px; left: 483.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series3<br>21%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 351.012px; left: 448.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel3" style="position: absolute; top: 351.012px; left: 448.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series4<br>10%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 406.012px; left: 372.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel4" style="position: absolute; top: 406.012px; left: 372.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series5<br>6%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 419.012px; left: 312.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel5" style="position: absolute; top: 419.012px; left: 312.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series6<br>4%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 356.012px; left: 163.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel6" style="position: absolute; top: 356.012px; left: 163.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series7<br>24%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 214.012px; left: 116.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel7" style="position: absolute; top: 214.012px; left: 116.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series8<br>2%</div></span><div class="pieLabelBackground" style="position: absolute; width: 40.1625px; height: 35.975px; top: 89.0125px; left: 181.644px; background-color: rgb(0, 0, 0); opacity: 0.5;"> </div><span class="pieLabel" id="pieLabel8" style="position: absolute; top: 89.0125px; left: 181.644px;"><div style="font-size:8pt;text-align:center;padding:2px;color:white;">Series9<br>22%</div></span></div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Line Chart</h5>
                  <div class="bars" style="height: 400px; padding: 0px; position: relative;"><canvas class="flot-base" width="705" height="500" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 564.6px; height: 400px;"></canvas><div class="flot-text" style="position: absolute; inset: 0px; font-size: smaller; color: rgb(84, 84, 84);"><div class="flot-x-axis flot-x1-axis xAxis x1Axis" style="position: absolute; inset: 0px;"><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 17px; text-align: center;">0</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 68px; text-align: center;">1</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 120px; text-align: center;">2</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 172px; text-align: center;">3</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 223px; text-align: center;">4</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 275px; text-align: center;">5</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 326px; text-align: center;">6</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 378px; text-align: center;">7</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 430px; text-align: center;">8</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 481px; text-align: center;">9</div><div class="flot-tick-label tickLabel" style="position: absolute; max-width: 47px; top: 381px; left: 529px; text-align: center;">10</div></div><div class="flot-y-axis flot-y1-axis yAxis y1Axis" style="position: absolute; inset: 0px;"><div class="flot-tick-label tickLabel" style="position: absolute; top: 366px; left: 8px; text-align: right;">0</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 305px; left: 8px; text-align: right;">5</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 244px; left: 2px; text-align: right;">10</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 183px; left: 2px; text-align: right;">15</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 122px; left: 2px; text-align: right;">20</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 61px; left: 2px; text-align: right;">25</div><div class="flot-tick-label tickLabel" style="position: absolute; top: 0px; left: 2px; text-align: right;">30</div></div></div><canvas class="flot-overlay" width="705" height="500" style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 564.6px; height: 400px;"></canvas></div>
                </div>
              </div>
            </div>
          </div>
          <!-- ============================================================== -->
          <!-- Sales chart -->
          <!-- ============================================================== -->
          <!-- ============================================================== -->
          <!-- Recent comment and chats -->
          <!-- ============================================================== -->
          <div class="row">
            <!-- column -->
            <div class="col-lg-6">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Message</h4>
                </div>
                <div class="comment-widgets scrollable">
                  <!-- Comment Row -->
                  <div class="d-flex flex-row comment-row mt-0">
                    <div class="p-2">
                      <img
                        src="{% static 'assets/images/users/1.jpg' %}"
                        alt="user"
                        width="50"
                        class="rounded-circle"
                      />
                    </div>
                    <div class="comment-text w-100">
                      <h6 class="font-medium">James Anderson</h6>
                      <span class="mb-3 d-block"
                        >Lorem Ipsum is simply dummy text of the printing and
                        type setting industry.
                      </span>
                      <div class="comment-footer">
                        <span class="text-muted float-end">April 14, 2021</span>
                        <button
                          type="button"
                          class="btn btn-cyan btn-sm text-white"
                        >
                          Edit
                        </button>
                        <button
                          type="button"
                          class="btn btn-success btn-sm text-white"
                        >
                          Publish
                        </button>
                        <button
                          type="button"
                          class="btn btn-danger btn-sm text-white"
                        >
                          Delete
                        </button>
                      </div>
                    </div>
                  </div>
                  <!-- Comment Row -->
                  <div class="d-flex flex-row comment-row">
                    <div class="p-2">
                      <img
                        src="{% static 'assets/images/users/4.jpg' %}"
                        alt="user"
                        width="50"
                        class="rounded-circle"
                      />
                    </div>
                    <div class="comment-text active w-100">
                      <h6 class="font-medium">Michael Jorden</h6>
                      <span class="mb-3 d-block"
                        >Lorem Ipsum is simply dummy text of the printing and
                        type setting industry.
                      </span>
                      <div class="comment-footer">
                        <span class="text-muted float-end">May 10, 2021</span>
                        <button
                          type="button"
                          class="btn btn-cyan btn-sm text-white"
                        >
                          Edit
                        </button>
                        <button
                          type="button"
                          class="btn btn-success btn-sm text-white"
                        >
                          Publish
                        </button>
                        <button
                          type="button"
                          class="btn btn-danger btn-sm text-white"
                        >
                          Delete
                        </button>
                      </div>
                    </div>
                  </div>
                  <!-- Comment Row -->
                  <div class="d-flex flex-row comment-row">
                    <div class="p-2">
                      <img
                        src="{% static 'assets/images/users/5.jpg' %}"
                        alt="user"
                        width="50"
                        class="rounded-circle"
                      />
                    </div>
                    <div class="comment-text w-100">
                      <h6 class="font-medium">Johnathan Doeting</h6>
                      <span class="mb-3 d-block">
                        {{ip}}
                      </span>
                      <div class="comment-footer">
                        <span class="text-muted float-end">August 1, 2021</span>
                        <button
                          type="button"
                          class="btn btn-cyan btn-sm text-white"
                        >
                          Edit
                        </button>
                        <button
                          type="button"
                          class="btn btn-success btn-sm text-white"
                        >
                          Publish
                        </button>
                        <button
                          type="button"
                          class="btn btn-danger btn-sm text-white"
                        >
                          Delete
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Card -->
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">To Do List</h4>
                  <div class="todo-widget scrollable" style="height: 450px">
                    <ul
                      class="list-task todo-list list-group mb-0"
                      data-role="tasklist"
                    >
                      <li class="list-group-item todo-item" data-role="task">
                        <div class="form-check">
                          <input
                            type="checkbox"
                            class="form-check-input"
                            id="customCheck"
                          />
                          <label
                            class="form-check-label w-100 mb-0 todo-label"
                            for="customCheck"
                          >
                            <span class="todo-desc fw-normal"
                              >Lorem Ipsum is simply dummy text of the printing
                              and typesetting industry.</span
                            >
                            <span class="badge rounded-pill bg-danger float-end"
                              >Today</span
                            >
                          </label>
                        </div>
                        <ul class="list-style-none assignedto">
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/1.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Steave"
                            />
                          </li>
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/2.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Jessica"
                            />
                          </li>
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/3.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Priyanka"
                            />
                          </li>
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/4.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Selina"
                            />
                          </li>
                        </ul>
                      </li>
                      <li class="list-group-item todo-item" data-role="task">
                        <div class="form-check">
                          <input
                            type="checkbox"
                            class="form-check-input"
                            id="customCheck1"
                          />
                          <label
                            class="form-check-label w-100 mb-0 todo-label"
                            for="customCheck1"
                          >
                            <span class="todo-desc fw-normal"
                              >Lorem Ipsum is simply dummy text of the
                              printing</span
                            ><span
                              class="badge rounded-pill bg-primary float-end"
                              >1 week
                            </span>
                          </label>
                        </div>
                        <div class="item-date">26 jun 2021</div>
                      </li>
                      <li class="list-group-item todo-item" data-role="task">
                        <div class="form-check">
                          <input
                            type="checkbox"
                            class="form-check-input"
                            id="customCheck2"
                          />
                          <label
                            class="form-check-label w-100 mb-0 todo-label"
                            for="customCheck2"
                          >
                            <span class="todo-desc fw-normal"
                              >Give Purchase report to</span
                            >
                            <span class="badge rounded-pill bg-info float-end"
                              >Yesterday</span
                            >
                          </label>
                        </div>
                        <ul class="list-style-none assignedto">
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/3.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Priyanka"
                            />
                          </li>
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/4.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Selina"
                            />
                          </li>
                        </ul>
                      </li>
                      <li class="list-group-item todo-item" data-role="task">
                        <div class="form-check">
                          <input
                            type="checkbox"
                            class="form-check-input"
                            id="customCheck3"
                          />
                          <label
                            class="form-check-label w-100 mb-0 todo-label"
                            for="customCheck3"
                          >
                            <span class="todo-desc fw-normal"
                              >Lorem Ipsum is simply dummy text of the printing
                            </span>
                            <span
                              class="badge rounded-pill bg-warning float-end"
                              >2 weeks</span
                            >
                          </label>
                        </div>
                        <div class="item-date">26 jun 2021</div>
                      </li>
                      <li class="list-group-item todo-item" data-role="task">
                        <div class="form-check">
                          <input
                            type="checkbox"
                            class="form-check-input"
                            id="customCheck4"
                          />
                          <label
                            class="form-check-label w-100 mb-0 todo-label"
                            for="customCheck4"
                          >
                            <span class="todo-desc fw-normal"
                              >Give Purchase report to</span
                            >
                            <span class="badge rounded-pill bg-info float-end"
                              >Yesterday</span
                            >
                          </label>
                        </div>
                        <ul class="list-style-none assignedto">
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/3.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Priyanka"
                            />
                          </li>
                          <li class="assignee">
                            <img
                              class="rounded-circle"
                              width="40"
                              src="{% static 'assets/images/users/4.jpg' %}"
                              alt="user"
                              data-toggle="tooltip"
                              data-placement="top"
                              title=""
                              data-original-title="Selina"
                            />
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <!-- card -->
  
              



            </div>
            <!-- column -->

            <div class="col-lg-6">
              <!-- Card -->
              <div class="card">
                <div class="card-header">
                  <h4 class="card-title">Staff List</h4>
                </div>
                <div class="card-body">
                  <!-- <h4 class="card-title"></h4>   -->
                  <div class="table-responsive">
                    <!-- <div class="row">
                        <div class="col-sm-12 text-center loader">
                            <img class="loading" src="../media/loading.svg" style="width:10%;" alt="">
                        </div>
                    </div> -->

                    <table class="table table-striped table-bordered staffDatatable" id="staffDatatable" width="100%" cellspacing="0">
                      <thead>
                          <th>Email</th>
                          <th>Last Login</th>
                          <th>Staus</th>                                
                      </thead>
                      <tbody class="staffTb" id="staffTb">
                      </tbody>
                    </table>
                  </div>                
                </div> 
                <div class="card-footer">
                  <a type="button" class="btn btn-secondary btn-block" href="{% url 'user-staff' %}">Check Staff detail</a>
                </div>               
              </div>

              

              
            </div>
          </div>
          <!-- ============================================================== -->
          <!-- Recent comment and chats -->
          <!-- ============================================================== -->
        </div>
        












{% endblock content %}


{% block footerjs %}
    <!-- <script>let tabelName = 'staffDatatable';  </script> -->
    <!-- Charts js Files -->
    <script src="{% static 'assets/libs/moment/min/moment.min.js' %}"></script>
    <script src="{% static 'assets/libs/chart/matrix.interface.js' %}"></script>
    <script src="{% static 'assets/libs/flot/excanvas.js' %}"></script>
    <script src="{% static 'assets/libs/flot/jquery.flot.js' %}"></script>
    <script src="{% static 'assets/libs/flot/jquery.flot.pie.js' %}"></script>
    <script src="{% static 'assets/libs/flot/jquery.flot.time.js' %}"></script>
    <script src="{% static 'assets/libs/flot/jquery.flot.stack.js' %}"></script>
    <script src="{% static 'assets/libs/flot/jquery.flot.crosshair.js' %}"></script>
    <script src="{% static 'assets/libs/flot.tooltip/js/jquery.flot.tooltip.min.js' %}"></script>
    <script src="{% static 'assets/libs/chart/jquery.peity.min.js' %}"></script>
    <script src="{% static 'assets/libs/chart/matrix.charts.js' %}"></script>
    <script src="{% static 'assets/libs/chart/jquery.flot.pie.min.js' %}"></script>
    <script src="{% static 'assets/libs/chart/turning-series.js' %}"></script>
    <script src="{% static 'dist/js/pages/chart/chart-page-init.js' %}"></script>
    <!-- <script src="{% static 'js/user/staff_data_table_home.js' %}"></script> -->


    <script>


    let staffTable = document.getElementById('staffTb');
    let totalStaff = document.getElementById('totalStaff');
    let totalContact = document.getElementById('totalContact');
    let totalMatter = document.getElementById('totalMatter');
    let totalCurrTodo = document.getElementById('currentTodo');

    let getStaffList = async () => {
        let response = await fetch('/api/users/')
        let staffJsonData = await response.json()
        totalStaff.innerHTML = staffJsonData.length;
        renderDataInTheTable(staffJsonData);
        // staffTable.append('<tr>')
    }
    // class="odd"
    function renderDataInTheTable(todos) {
        for (let i = 0; todos.length > i; i++) {
            let clstrip = (i%2 === 0) ? 'even': 'odd';
            let todo = todos[i]
            let row = '<tr class='+clstrip+'>';
                row += '<td>'+`${todo.email}`+'</td>';
                row += '<td>'+ date_time_format(`${todo.last_login}`) +'</td>';
                row += '<td>'+ '<i class="fa fa-circle text-success me-2"></i>' +'</td></tr>';
            staffTable.innerHTML += row
        }
    }

    // function renderDataInTheTable_old(todos) {
    //             const mytable = document.getElementById("staffDatatable");
    //             todos.forEach(todo => {
    //                 let newRow = document.createElement("tr");
    //                 Object.values(todo).forEach((value) => {
    //                     let cell = document.createElement("td");
    //                     cell.innerText = value;
    //                     newRow.appendChild(cell);
    //                 })
    //                 mytable.appendChild(newRow);
    //             });
    //       }

    let getContactList = async () => {
        let response = await fetch('/api/person-contact-list/')
        let contacts = await response.json()
        // staffTable.append('<tr>')
          totalContact.innerHTML = contacts.length;
          // console.log(responce)
        // for (let i = 0; staffs.length > i; i++) {
        //     let staff = staffs[i]

        //     let row = '<tr><td>'+`${staff.email}`+'</td>';
        //         row += '<td>'+ date_time_format(`${staff.last_login}`) +'</td>';
        //         row += '<td>'+ '<i class="fa fa-circle text-success me-2"></i>' +'</td><tr>';

        //     staffTable.innerHTML += row
        // }
    }

    let getMatterList = async () => {
        let response = await fetch('/api/matters/')
        let matters = await response.json()
        // staffTable.append('<tr>')
          totalMatter.innerHTML = matters.length;
          // console.log(responce)
        // for (let i = 0; staffs.length > i; i++) {
        //     let staff = staffs[i]

        //     let row = '<tr><td>'+`${staff.email}`+'</td>';
        //         row += '<td>'+ date_time_format(`${staff.last_login}`) +'</td>';
        //         row += '<td>'+ '<i class="fa fa-circle text-success me-2"></i>' +'</td><tr>';

        //     staffTable.innerHTML += row
        // }
    }

    let getCurrentTodoList = async () => {
        let response = await fetch('/api/current-events/')
        let currTodos = await response.json()
        // staffTable.append('<tr>')
          totalCurrTodo.innerHTML = currTodos.length;
          // console.log(responce)

    }

    let date_time_format=(dt)=>{
                let dd = moment(dt).format('LLL');
                if (dd==='Invalid date'){
                    return '';
                }else{
                    return dd;
                }                            
            } 


 

            
      $(document).ready(function() {

        getStaffList();
        getContactList();
        getMatterList();
        getCurrentTodoList();

  
          $('#removePersonContact').on('shown.bs.modal', function(e) {  
              var reference_tag = $(e.relatedTarget); 
              var fsid = reference_tag.data('id');
              //   var usid = <?php echo $usid; ?>; 
              // console.log(fsid) ; 
              $.ajax({
                  type: "GET",
                  url: "{% url 'person-popup' %}",
                  data: {rec_id: fsid},
                  datatype: 'json',
                  dataSrc: "",
  
                  success:function(response) {
                      // console.log(response[0]['fields']);
                      let data = response[0]['fields'];
                      let key = response[0]['pk'];
                      $('#recName').html(`${data['firstName']} ${data['familyName']}`);
                      $('#recKey').html(key);
                      // $('#rec_key').val(key);
                  },
                  onerror:function(){
                      $('#process').html('... error loading...');
                  }
              });
          });
  
          $('#btn-Remove-Contact').click(function(e){ 
              let dkey = $('#recKey').html();
              let csrfmiddlewaretoken = $('input[name="csrfmiddlewaretoken"]').val();
              // alert(dkey)                                
              let form = $('#formRemoveRec')[0];
              let formdata = new FormData(form);
              // console.log(csrfmiddlewaretoken);
              // $("#formRemoveRec").submit();
              $.ajax({
                  type: "POST",
                  // data: formData,
                  url: "{% url 'delete-person-contact' %}",
                  data: {
                      dkey: dkey,
                      csrfmiddlewaretoken: csrfmiddlewaretoken,
                  },                        
                  datatype: 'json',
                  dataSrc: "",
  
                  success:function(response) {
                      // console.log(response[0]['fields']);
                      console.log(response);
                      tryc("success", "Success: Record removed !");
  
                      // fill_table(usid);                             
                      $('#removeBody').html(''); 
                      window.location.href="{% url 'person-contact' %}";
                      $('#personContactDatatable').DataTable().destroy();
                      fill_person_contact_table();                               
                  },
                  onerror:function(){
                      $('#process').html('... error loading...');
                  }
              })
  
          }); 
  
          $(document).ajaxStart(function(){
              $(".loading").css("display", "block");
          });
  
          $(document).ajaxComplete(function(){
              $(".loading").css("display", "none");
          });
      });
  
  </script>





{% endblock footerjs %}


